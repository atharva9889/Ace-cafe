// client/index.html
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1" />
    <title>Atharva Raut's Cafe</title>
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>
    <script type="text/javascript" src="https://replit.com/public/js/replit-dev-banner.js"></script>
  </body>
</html>

// client/src/main.tsx
import { createRoot } from "react-dom/client";
import App from "./App";
import "./index.css";

createRoot(document.getElementById("root")!).render(<App />);

// client/src/index.css
@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  * {
    @apply border-border;
  }

  body {
    @apply font-sans antialiased bg-background text-foreground;
  }
}

@layer components {
  .nav-link {
    @apply relative font-medium;
  }
  
  .nav-link::after {
    content: '';
    @apply absolute w-0 h-0.5 bottom-0 left-0 bg-primary transition-all duration-300;
  }
  
  .nav-link:hover::after {
    @apply w-full;
  }
  
  .nav-link.active::after {
    @apply w-full;
  }
  
  .section-title {
    @apply text-3xl md:text-4xl font-light mb-6;
  }
  
  .section-text {
    @apply text-lg leading-relaxed;
  }
  
  .btn-primary {
    @apply inline-block bg-primary text-white py-2 px-6 transition-colors hover:bg-gray-800;
  }
}

// client/src/App.tsx
import { Switch, Route } from "wouter";
import { queryClient } from "./lib/queryClient";
import { QueryClientProvider } from "@tanstack/react-query";
import { Toaster } from "@/components/ui/toaster";
import NotFound from "@/pages/not-found";
import Navbar from "@/components/layout/Navbar";
import Footer from "@/components/layout/Footer";
import HomePage from "@/pages/HomePage";
import AboutPage from "@/pages/AboutPage";
import MenuPage from "@/pages/MenuPage";
import LocationsPage from "@/pages/LocationsPage";
import JournalPage from "@/pages/JournalPage";
import CateringPage from "@/pages/CateringPage";
import ContactPage from "@/pages/ContactPage";

function Router() {
  return (
    <Switch>
      <Route path="/" component={HomePage} />
      <Route path="/about" component={AboutPage} />
      <Route path="/menu" component={MenuPage} />
      <Route path="/locations" component={LocationsPage} />
      <Route path="/journal" component={JournalPage} />
      <Route path="/catering" component={CateringPage} />
      <Route path="/contact" component={ContactPage} />
      <Route component={NotFound} />
    </Switch>
  );
}

function App() {
  return (
    <QueryClientProvider client={queryClient}>
      <div className="flex flex-col min-h-screen">
        <Navbar />
        <main className="flex-grow">
          <Router />
        </main>
        <Footer />
      </div>
      <Toaster />
    </QueryClientProvider>
  );
}

export default App;

// client/src/components/layout/Navbar.tsx
import { useState, useEffect } from "react";
import { Link, useLocation } from "wouter";

const Navbar = () => {
  const [isMenuOpen, setIsMenuOpen] = useState(false);
  const [location] = useLocation();

  // Close mobile menu when changing location
  useEffect(() => {
    setIsMenuOpen(false);
  }, [location]);

  const isActive = (path: string) => {
    return location === path ? "active" : "";
  };

  return (
    <header className="sticky top-0 bg-white z-50 border-b border-gray-200">
      <nav className="container mx-auto px-4 py-4 flex flex-col md:flex-row justify-between items-center">
        <div className="flex items-center justify-between w-full md:w-auto">
          <Link href="/" className="text-2xl font-semibold tracking-tight">
            Atharva Raut's Cafe
          </Link>
          <button
            onClick={() => setIsMenuOpen(!isMenuOpen)}
            className="md:hidden focus:outline-none"
            aria-label="Toggle menu"
          >
            <svg
              className="w-6 h-6"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                strokeLinecap="round"
                strokeLinejoin="round"
                strokeWidth="2"
                d="M4 6h16M4 12h16m-7 6h7"
              ></path>
            </svg>
          </button>
        </div>
        <div
          className={`${
            isMenuOpen ? "flex" : "hidden"
          } md:flex flex-col md:flex-row items-center space-y-4 md:space-y-0 md:space-x-8 w-full md:w-auto pt-4 md:pt-0`}
        >
          <Link href="/" className={`nav-link ${isActive("/")}`}>
            Home
          </Link>
          <Link href="/about" className={`nav-link ${isActive("/about")}`}>
            About
          </Link>
          <Link href="/menu" className={`nav-link ${isActive("/menu")}`}>
            Menu
          </Link>
          <Link
            href="/locations"
            className={`nav-link ${isActive("/locations")}`}
          >
            Locations
          </Link>
          <Link href="/journal" className={`nav-link ${isActive("/journal")}`}>
            Journal
          </Link>
          <Link
            href="/catering"
            className={`nav-link ${isActive("/catering")}`}
          >
            Catering
          </Link>
          <Link href="/contact" className={`nav-link ${isActive("/contact")}`}>
            Contact
          </Link>
        </div>
      </nav>
    </header>
  );
};

export default Navbar;

// client/src/components/layout/Footer.tsx
import { Link } from "wouter";

const Footer = () => {
  return (
    <footer className="bg-primary text-white py-12">
      <div className="container mx-auto px-4">
        <div className="grid grid-cols-1 md:grid-cols-4 gap-8">
          <div>
            <h3 className="text-xl font-medium mb-4">Atharva Raut's Cafe</h3>
            <p className="mb-6">
              Neighbourhood cafe serving specialty coffee and fresh, seasonal
              food in a relaxed setting.
            </p>
            <div className="flex space-x-4">
              <a
                href="https://instagram.com"
                target="_blank"
                rel="noopener noreferrer"
                aria-label="Instagram"
                className="text-white hover:text-gray-300"
              >
                <i className="fab fa-instagram text-xl"></i>
              </a>
              <a
                href="https://facebook.com"
                target="_blank"
                rel="noopener noreferrer"
                aria-label="Facebook"
                className="text-white hover:text-gray-300"
              >
                <i className="fab fa-facebook-f text-xl"></i>
              </a>
              <a
                href="https://twitter.com"
                target="_blank"
                rel="noopener noreferrer"
                aria-label="Twitter"
                className="text-white hover:text-gray-300"
              >
                <i className="fab fa-twitter text-xl"></i>
              </a>
            </div>
          </div>

          <div>
            <h3 className="text-xl font-medium mb-4">Locations</h3>
            <p className="mb-2">Belsize Park</p>
            <p className="mb-4">4 South End Road, NW3 2QE</p>
            <p className="mb-2">Hampstead</p>
            <p>64 Hampstead High Street, NW3 1QH</p>
          </div>

          <div>
            <h3 className="text-xl font-medium mb-4">Opening Hours</h3>
            <p className="mb-2">Monday - Friday</p>
            <p className="mb-4">7:30am - 5:00pm</p>
            <p className="mb-2">Saturday - Sunday</p>
            <p>8:00am - 5:00pm</p>
          </div>

          <div>
            <h3 className="text-xl font-medium mb-4">Contact</h3>
            <p className="mb-2">General: info@atharvarautscafe.com</p>
            <p className="mb-2">Catering: catering@atharvarautscafe.com</p>
            <p>Phone: 020 7722 8782</p>
          </div>
        </div>

        <div className="border-t border-gray-700 mt-12 pt-8 text-center text-gray-400">
          <p>&copy; {new Date().getFullYear()} Atharva Raut's Cafe. All rights reserved.</p>
        </div>
      </div>
    </footer>
  );
};

export default Footer;

// client/src/components/home/HeroSection.tsx
const HeroSection = () => {
  return (
    <section className="relative h-screen">
      <div className="absolute inset-0 overflow-hidden">
        <img
          src="https://images.unsplash.com/photo-1600093463592-8e36ae95ef56?ixlib=rb-1.2.1&auto=format&fit=crop&w=2000&q=80"
          alt="Cafe interior with natural light"
          className="object-cover w-full h-full"
        />
      </div>
      <div className="absolute inset-0 bg-black bg-opacity-20 flex items-center justify-center">
        <div className="text-center text-white px-4">
          <h1 className="text-4xl md:text-6xl font-light mb-6 tracking-wider">
            NEIGHBOURHOOD CAFE SERVING BREAKFAST & LUNCH
          </h1>
          <p className="text-xl md:text-2xl font-light max-w-3xl mx-auto">
            Specialty coffee and fresh, seasonal food in a relaxed setting
          </p>
        </div>
      </div>
    </section>
  );
};

export default HeroSection;

// client/src/components/home/IntroSection.tsx
const IntroSection = () => {
  return (
    <section className="py-20 px-4">
      <div className="container mx-auto max-w-4xl text-center">
        <h2 className="section-title text-center">Welcome to Atharva Raut's Cafe</h2>
        <p className="text-lg md:text-xl leading-relaxed mb-12">
          Founded on a passion for exceptional coffee and simple, delicious food,
          we've been serving our community since 2021. Our philosophy is
          straightforward: source the best ingredients, prepare them with care,
          and serve them in a warm, welcoming environment.
        </p>
        <div className="grid grid-cols-1 md:grid-cols-3 gap-8">
          <div>
            <h3 className="text-xl font-medium mb-3">Specialty Coffee</h3>
            <p>
              Expertly roasted beans and skilled baristas crafting perfect cups,
              every time.
            </p>
          </div>
          <div>
            <h3 className="text-xl font-medium mb-3">Seasonal Menu</h3>
            <p>
              Fresh, locally-sourced ingredients prepared simply to let their
              quality shine through.
            </p>
          </div>
          <div>
            <h3 className="text-xl font-medium mb-3">Welcoming Space</h3>
            <p>
              A bright, airy atmosphere designed for comfort, conversation, and
              community.
            </p>
          </div>
        </div>
      </div>
    </section>
  );
};

export default IntroSection;

// client/src/components/home/GallerySection.tsx
import { GALLERY_IMAGES } from "@/lib/constants";

const GallerySection = () => {
  return (
    <section className="py-12 bg-secondary">
      <div className="container mx-auto px-4">
        <div className="grid grid-cols-2 md:grid-cols-4 gap-4">
          {GALLERY_IMAGES.map((image) => (
            <div key={image.id} className="overflow-hidden h-64">
              <img
                src={image.image}
                alt={image.alt}
                className="w-full h-full object-cover transition-transform duration-500 hover:scale-105"
              />
            </div>
          ))}
        </div>
      </div>
    </section>
  );
};

export default GallerySection;

// client/src/components/about/AboutSection.tsx
const AboutSection = () => {
  return (
    <section className="py-20 px-4">
      <div className="container mx-auto max-w-6xl">
        <div className="grid grid-cols-1 md:grid-cols-2 gap-12 items-center">
          <div>
            <h2 className="section-title">Our Story</h2>
            <p className="section-text mb-6">
              Atharva Raut's Cafe began as a simple idea: create a space where
              quality coffee meets exceptional food in a relaxed, welcoming
              environment.
            </p>
            <p className="section-text mb-6">
              What started as a passion project quickly grew into a beloved
              neighborhood institution. We've built our reputation on attention
              to detail, from the carefully sourced beans we use for our coffee
              to the seasonal ingredients that make up our menu.
            </p>
            <p className="section-text">
              Our team shares a dedication to craft and hospitality that makes
              every visit special. We believe in creating an experience that
              feels like home, whether you're stopping in for a quick coffee or
              settling in for a leisurely meal.
            </p>
          </div>
          <div className="h-96 overflow-hidden">
            <img
              src="https://images.unsplash.com/photo-1521017432531-fbd92d768814?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80"
              alt="Cozy cafe interior with wooden tables and natural light"
              className="w-full h-full object-cover"
            />
          </div>
        </div>
      </div>
    </section>
  );
};

export default AboutSection;

// client/src/components/menu/MenuSection.tsx
import { MENU_DATA } from "@/lib/constants";

const MenuSection = () => {
  return (
    <section className="py-20 px-4 bg-secondary">
      <div className="container mx-auto max-w-6xl">
        <h2 className="section-title text-center mb-12">Our Menu</h2>

        {MENU_DATA.map((category, index) => (
          <div key={index} className="mb-16 last:mb-0">
            <h3 className="text-2xl font-medium mb-8 text-center">
              {category.title}
            </h3>
            <div className="grid grid-cols-1 md:grid-cols-2 gap-8">
              {category.items.map((item, itemIndex) => (
                <div key={itemIndex} className="bg-white p-8">
                  <h4 className="text-xl font-medium mb-2">{item.title}</h4>
                  <p className="text-gray-600 mb-3">{item.description}</p>
                  <p className="font-medium">{item.price}</p>
                </div>
              ))}
            </div>
          </div>
        ))}
      </div>
    </section>
  );
};

export default MenuSection;

// client/src/components/locations/LocationsSection.tsx
import { LOCATIONS_DATA } from "@/lib/constants";

const LocationsSection = () => {
  return (
    <section className="py-20 px-4">
      <div className="container mx-auto max-w-6xl">
        <h2 className="section-title text-center mb-12">Locations</h2>

        <div className="grid grid-cols-1 md:grid-cols-2 gap-12">
          {LOCATIONS_DATA.map((location, index) => (
            <div key={index}>
              <div className="h-64 overflow-hidden mb-6">
                <img
                  src={location.image}
                  alt={`${location.name} cafe location`}
                  className="w-full h-full object-cover"
                />
              </div>
              <h3 className="text-2xl font-medium mb-3">{location.name}</h3>
              <p className="mb-2">{location.address}</p>
              <div className="mb-4">
                <p className="font-medium">Hours:</p>
                <p>{location.hours.weekdays}</p>
                <p>{location.hours.weekends}</p>
              </div>
              <p className="mb-2">Phone: {location.phone}</p>
              <div className="mt-6">
                <a
                  href={`https://maps.google.com/?q=${location.address}`}
                  target="_blank"
                  rel="noopener noreferrer"
                  className="btn-primary"
                >
                  View Map
                </a>
              </div>
            </div>
          ))}
        </div>
      </div>
    </section>
  );
};

export default LocationsSection;

// client/src/components/journal/JournalSection.tsx
import { Link } from "wouter";
import { JOURNAL_POSTS } from "@/lib/constants";

const JournalSection = () => {
  return (
    <section className="py-20 px-4 bg-secondary">
      <div className="container mx-auto max-w-6xl">
        <h2 className="section-title text-center mb-12">Journal</h2>

        <div className="grid grid-cols-1 md:grid-cols-3 gap-8">
          {JOURNAL_POSTS.map((post) => (
            <article key={post.id} className="bg-white overflow-hidden">
              <div className="h-56 overflow-hidden">
                <img
                  src={post.image}
                  alt={post.title}
                  className="w-full h-full object-cover transition-transform duration-500 hover:scale-105"
                />
              </div>
              <div className="p-6">
                <p className="text-gray-500 text-sm mb-2">{post.date}</p>
                <h3 className="text-xl font-medium mb-3">{post.title}</h3>
                <p className="text-gray-600 mb-4">{post.excerpt}</p>
                <Link href={`/journal/${post.id}`} className="text-primary font-medium hover:underline">
                  Read More
                </Link>
              </div>
            </article>
          ))}
        </div>

        <div className="text-center mt-12">
          <Link href="/journal" className="btn-primary">
            View All Journal Entries
          </Link>
        </div>
      </div>
    </section>
  );
};

export default JournalSection;

// client/src/components/catering/CateringSection.tsx
const CateringSection = () => {
  return (
    <section className="py-20 px-4">
      <div className="container mx-auto max-w-6xl">
        <div className="grid grid-cols-1 md:grid-cols-2 gap-12 items-center">
          <div className="h-96 overflow-hidden">
            <img
              src="https://images.unsplash.com/photo-1592861956120-e524fc739696?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80"
              alt="Catering spread with various foods"
              className="w-full h-full object-cover"
            />
          </div>

          <div>
            <h2 className="section-title">Catering</h2>
            <p className="section-text mb-6">
              Bring the Atharva Raut's Cafe experience to your next event. We
              offer bespoke catering services for corporate meetings, private
              parties, and special occasions.
            </p>
            <p className="section-text mb-6">
              Our catering menu features the same high-quality, seasonal
              ingredients that we serve in our cafes. From breakfast platters to
              lunch buffets and afternoon tea setups, we can customize our
              offerings to suit your event needs.
            </p>
            <p className="section-text mb-8">
              We also provide coffee service with our expert baristas, ensuring
              your guests enjoy the perfect cup throughout your event.
            </p>
            <a
              href="/documents/catering-menu.pdf"
              className="btn-primary"
              target="_blank"
              rel="noopener noreferrer"
            >
              Download Catering Menu
            </a>
          </div>
        </div>
      </div>
    </section>
  );
};

export default CateringSection;

// client/src/components/contact/ContactSection.tsx
import { useForm } from "react-hook-form";
import { zodResolver } from "@hookform/resolvers/zod";
import { z } from "zod";
import { useToast } from "@/hooks/use-toast";
import { insertContactMessageSchema } from "@shared/schema";

type ContactFormData = z.infer<typeof insertContactMessageSchema>;

const ContactSection = () => {
  const { toast } = useToast();
  const form = useForm<ContactFormData>({
    resolver: zodResolver(insertContactMessageSchema),
    defaultValues: {
      name: "",
      email: "",
      subject: "",
      message: "",
    },
  });

  const onSubmit = async (data: ContactFormData) => {
    try {
      await fetch("/api/contact", {
        method: "POST",
        headers: {
          "Content-Type": "application/json",
        },
        body: JSON.stringify(data),
      });
      
      toast({
        title: "Message sent",
        description: "We'll get back to you as soon as possible.",
      });
      
      form.reset();
    } catch (error) {
      toast({
        title: "Error",
        description: "There was a problem sending your message. Please try again.",
        variant: "destructive",
      });
    }
  };

  return (
    <section className="py-20 px-4 bg-secondary">
      <div className="container mx-auto max-w-6xl">
        <h2 className="section-title text-center mb-12">Contact Us</h2>

        <div className="grid grid-cols-1 md:grid-cols-2 gap-12">
          <div>
            <h3 className="text-2xl font-medium mb-6">Get in Touch</h3>
            <p className="mb-8 text-lg">
              Whether you have a question about our menu, locations, or catering
              services, we'd love to hear from you.
            </p>

            <div className="mb-6">
              <h4 className="text-xl font-medium mb-3">General Inquiries</h4>
              <p className="mb-1">Email: info@atharvarautscafe.com</p>
              <p>Phone: 020 7722 8782</p>
            </div>

            <div className="mb-6">
              <h4 className="text-xl font-medium mb-3">Catering</h4>
              <p>Email: catering@atharvarautscafe.com</p>
            </div>

            <div>
              <h4 className="text-xl font-medium mb-3">Careers</h4>
              <p>Email: jobs@atharvarautscafe.com</p>
            </div>
          </div>

          <div>
            <form className="bg-white p-8" onSubmit={form.handleSubmit(onSubmit)}>
              <div className="mb-6">
                <label htmlFor="name" className="block text-gray-700 mb-2">
                  Name
                </label>
                <input
                  type="text"
                  id="name"
                  {...form.register("name")}
                  className="w-full border border-gray-300 px-4 py-2 focus:outline-none focus:border-primary"
                />
                {form.formState.errors.name && (
                  <p className="text-red-500 text-sm mt-1">
                    {form.formState.errors.name.message}
                  </p>
                )}
              </div>

              <div className="mb-6">
                <label htmlFor="email" className="block text-gray-700 mb-2">
                  Email
                </label>
                <input
                  type="email"
                  id="email"
                  {...form.register("email")}
                  className="w-full border border-gray-300 px-4 py-2 focus:outline-none focus:border-primary"
                />
                {form.formState.errors.email && (
                  <p className="text-red-500 text-sm mt-1">
                    {form.formState.errors.email.message}
                  </p>
                )}
              </div>

              <div className="mb-6">
                <label htmlFor="subject" className="block text-gray-700 mb-2">
                  Subject
                </label>
                <input
                  type="text"
                  id="subject"
                  {...form.register("subject")}
                  className="w-full border border-gray-300 px-4 py-2 focus:outline-none focus:border-primary"
                />
                {form.formState.errors.subject && (
                  <p className="text-red-500 text-sm mt-1">
                    {form.formState.errors.subject.message}
                  </p>
                )}
              </div>

              <div className="mb-6">
                <label htmlFor="message" className="block text-gray-700 mb-2">
                  Message
                </label>
                <textarea
                  id="message"
                  rows={4}
                  {...form.register("message")}
                  className="w-full border border-gray-300 px-4 py-2 focus:outline-none focus:border-primary"
                ></textarea>
                {form.formState.errors.message && (
                  <p className="text-red-500 text-sm mt-1">
                    {form.formState.errors.message.message}
                  </p>
                )}
              </div>

              <button
                type="submit"
                className="w-full bg-primary text-white py-3 px-6 transition-colors hover:bg-gray-800"
                disabled={form.formState.isSubmitting}
              >
                {form.formState.isSubmitting ? "Sending..." : "Send Message"}
              </button>
            </form>
          </div>
        </div>
      </div>
    </section>
  );
};

export default ContactSection;

// client/src/components/instagram/InstagramFeed.tsx
import { INSTAGRAM_POSTS } from "@/lib/constants";

const InstagramFeed = () => {
  return (
    <section className="py-12">
      <div className="container mx-auto px-4">
        <h2 className="text-2xl font-light mb-10 text-center">
          Follow Us{" "}
          <a
            href="https://instagram.com"
            target="_blank"
            rel="noopener noreferrer"
            className="text-primary hover:underline"
          >
            @atharvarautscafe
          </a>
        </h2>

        <div className="grid grid-cols-2 md:grid-cols-6 gap-4">
          {INSTAGRAM_POSTS.map((post) => (
            <div key={post.id} className="overflow-hidden">
              <img
                src={post.image}
                alt={post.alt}
                className="w-full h-full object-cover transition-transform duration-500 hover:scale-105"
              />
            </div>
          ))}
        </div>
      </div>
    </section>
  );
};

export default InstagramFeed;

// client/src/pages/HomePage.tsx
import { useEffect } from "react";
import HeroSection from "@/components/home/HeroSection";
import IntroSection from "@/components/home/IntroSection";
import GallerySection from "@/components/home/GallerySection";
import AboutSection from "@/components/about/AboutSection";
import MenuSection from "@/components/menu/MenuSection";
import LocationsSection from "@/components/locations/LocationsSection";
import JournalSection from "@/components/journal/JournalSection";
import CateringSection from "@/components/catering/CateringSection";
import ContactSection from "@/components/contact/ContactSection";
import InstagramFeed from "@/components/instagram/InstagramFeed";

const HomePage = () => {
  useEffect(() => {
    document.title = "Atharva Raut's Cafe - Home";
  }, []);

  return (
    <>
      <HeroSection />
      <IntroSection />
      <GallerySection />
      <AboutSection />
      <MenuSection />
      <LocationsSection />
      <JournalSection />
      <CateringSection />
      <ContactSection />
      <InstagramFeed />
    </>
  );
};

export default HomePage;

// client/src/pages/AboutPage.tsx
import { useEffect } from "react";
import AboutSection from "@/components/about/AboutSection";

const AboutPage = () => {
  useEffect(() => {
    document.title = "Atharva Raut's Cafe - About";
  }, []);

  return (
    <div className="pt-16">
      <div className="bg-secondary py-12">
        <div className="container mx-auto px-4">
          <h1 className="text-4xl md:text-5xl font-light text-center">About Us</h1>
        </div>
      </div>
      <AboutSection />
      
      <section className="py-20 px-4 bg-secondary">
        <div className="container mx-auto max-w-4xl">
          <h2 className="section-title text-center mb-10">Our Values</h2>
          <div className="grid grid-cols-1 md:grid-cols-3 gap-8">
            <div className="bg-white p-8">
              <h3 className="text-xl font-medium mb-4">Quality</h3>
              <p>We never compromise on the quality of our ingredients or our preparation methods. From farm to cup and plate, we ensure excellence at every step.</p>
            </div>
            <div className="bg-white p-8">
              <h3 className="text-xl font-medium mb-4">Community</h3>
              <p>Our cafe is a gathering place for the neighborhood. We strive to create an environment where everyone feels welcome and connections are made.</p>
            </div>
            <div className="bg-white p-8">
              <h3 className="text-xl font-medium mb-4">Sustainability</h3>
              <p>We're committed to responsible sourcing and minimizing our environmental impact through thoughtful choices about our ingredients and operations.</p>
            </div>
          </div>
        </div>
      </section>
      
      <section className="py-20 px-4">
        <div className="container mx-auto max-w-6xl">
          <div className="grid grid-cols-1 md:grid-cols-2 gap-12 items-center">
            <div className="h-96 overflow-hidden">
              <img
                src="https://images.unsplash.com/photo-1511920170033-f8396924c348?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80"
                alt="Barista preparing coffee"
                className="w-full h-full object-cover"
              />
            </div>
            <div>
              <h2 className="section-title">Our Team</h2>
              <p className="section-text mb-6">
                Behind every cup of coffee and plate of food is a dedicated team passionate about craft and hospitality. From our skilled baristas to our creative chefs, everyone brings their expertise and enthusiasm to Atharva Raut's Cafe.
              </p>
              <p className="section-text mb-6">
                We invest in our team through ongoing training and development, ensuring they have the skills to deliver exceptional experiences. Many of our staff have been with us since the beginning, creating a sense of family that extends to our customers.
              </p>
              <p className="section-text">
                When you visit, you'll be greeted by people who truly care about making your time with us special.
              </p>
            </div>
          </div>
        </div>
      </section>
    </div>
  );
};

export default AboutPage;

// client/src/pages/MenuPage.tsx
import { useEffect } from "react";
import MenuSection from "@/components/menu/MenuSection";

const MenuPage = () => {
  useEffect(() => {
    document.title = "Atharva Raut's Cafe - Menu";
  }, []);

  return (
    <div className="pt-16">
      <div className="bg-secondary py-12">
        <div className="container mx-auto px-4">
          <h1 className="text-4xl md:text-5xl font-light text-center">Our Menu</h1>
        </div>
      </div>
      
      <section className="py-12 px-4">
        <div className="container mx-auto max-w-4xl text-center">
          <p className="section-text mb-6">
            Our menu changes with the seasons to showcase the freshest ingredients at their peak. We source locally whenever possible and prepare everything with care to let the natural flavors shine.
          </p>
          <p className="section-text">
            Please note that all our eggs are free-range, our milk is organic, and we can accommodate most dietary requirements - just ask our friendly staff.
          </p>
        </div>
      </section>
      
      <MenuSection />
      
      <section className="py-20 px-4">
        <div className="container mx-auto max-w-6xl">
          <h2 className="section-title text-center mb-10">Daily Specials</h2>
          <p className="text-center section-text mb-12">
            In addition to our regular menu, we offer daily specials that showcase seasonal ingredients and our chef's creativity. Check our blackboard when you visit or follow us on social media for updates.
          </p>
          
          <div className="grid grid-cols-1 md:grid-cols-2 gap-12">
            <div className="h-80 overflow-hidden">
              <img
                src="https://images.unsplash.com/photo-1504674900247-0877df9cc836?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80"
                alt="Daily special dish"
                className="w-full h-full object-cover"
              />
            </div>
            <div className="h-80 overflow-hidden">
              <img
                src="https://images.unsplash.com/photo-1482049016688-2d3e1b311543?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80"
                alt="Seasonal pastries"
                className="w-full h-full object-cover"
              />
            </div>
          </div>
        </div>
      </section>
    </div>
  );
};

export default MenuPage;

// client/src/pages/LocationsPage.tsx
import { useEffect } from "react";
import LocationsSection from "@/components/locations/LocationsSection";

const LocationsPage = () => {
  useEffect(() => {
    document.title = "Atharva Raut's Cafe - Locations";
  }, []);

  return (
    <div className="pt-16">
      <div className="bg-secondary py-12">
        <div className="container mx-auto px-4">
          <h1 className="text-4xl md:text-5xl font-light text-center">Our Locations</h1>
        </div>
      </div>
      
      <section className="py-12 px-4">
        <div className="container mx-auto max-w-4xl text-center">
          <p className="section-text">
            Find us in two beautiful locations in North London. Each of our cafes has its own unique character, but both offer the same high-quality coffee, food, and warm welcome that define Atharva Raut's Cafe.
          </p>
        </div>
      </section>
      
      <LocationsSection />
      
      <section className="py-20 px-4 bg-secondary">
        <div className="container mx-auto max-w-4xl text-center">
          <h2 className="section-title mb-8">Parking & Transport</h2>
          
          <div className="grid grid-cols-1 md:grid-cols-2 gap-12 text-left">
            <div>
              <h3 className="text-2xl font-medium mb-4">Belsize Park</h3>
              <p className="mb-4"><strong>Underground:</strong> Belsize Park station (Northern Line) is a 5-minute walk.</p>
              <p className="mb-4"><strong>Bus:</strong> Routes 168, C11, and 268 stop nearby.</p>
              <p><strong>Parking:</strong> Limited pay-and-display parking is available on South End Road and surrounding streets.</p>
            </div>
            
            <div>
              <h3 className="text-2xl font-medium mb-4">Hampstead</h3>
              <p className="mb-4"><strong>Underground:</strong> Hampstead station (Northern Line) is a 3-minute walk.</p>
              <p className="mb-4"><strong>Bus:</strong> Routes 46, 268, and H3 stop on Hampstead High Street.</p>
              <p><strong>Parking:</strong> There is a public car park on Hampstead High Street, a short walk from the cafe.</p>
            </div>
          </div>
        </div>
      </section>
    </div>
  );
};

export default LocationsPage;

// client/src/pages/JournalPage.tsx
import { useEffect } from "react";
import { JOURNAL_POSTS } from "@/lib/constants";
import { Link } from "wouter";

const JournalPage = () => {
  useEffect(() => {
    document.title = "Atharva Raut's Cafe - Journal";
  }, []);

  // Mock expanded journal posts
  const allPosts = [
    ...JOURNAL_POSTS,
    {
      id: "4",
      title: "Behind the Scenes: Our Kitchen",
      excerpt: "Take a look at what goes on behind the scenes in our busy kitchen as our chefs prepare for the day.",
      date: "March 25, 2023",
      image: "https://images.unsplash.com/photo-1556911261-6bd341186b2f?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80"
    },
    {
      id: "5",
      title: "Meet Our Suppliers: Origin Coffee",
      excerpt: "We sit down with the team from Origin Coffee to discuss sustainability in the coffee industry.",
      date: "March 10, 2023",
      image: "https://images.unsplash.com/photo-1495474472287-4d71bcdd2085?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80"
    },
    {
      id: "6",
      title: "Seasonal Recipe: Spring Asparagus Tart",
      excerpt: "Our head chef shares a simple recipe for making our popular asparagus tart at home.",
      date: "February 28, 2023",
      image: "https://images.unsplash.com/photo-1627308595229-7830a5c91f9f?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80"
    }
  ];

  return (
    <div className="pt-16">
      <div className="bg-secondary py-12">
        <div className="container mx-auto px-4">
          <h1 className="text-4xl md:text-5xl font-light text-center">Journal</h1>
        </div>
      </div>
      
      <section className="py-12 px-4">
        <div className="container mx-auto max-w-4xl text-center">
          <p className="section-text">
            Welcome to our journal, where we share stories from our cafes, insights into our coffee and food, and news about upcoming events and special offers.
          </p>
        </div>
      </section>
      
      <section className="py-12 px-4">
        <div className="container mx-auto max-w-6xl">
          <div className="grid grid-cols-1 md:grid-cols-3 gap-8">
            {allPosts.map((post) => (
              <article key={post.id} className="bg-white overflow-hidden shadow-sm">
                <div className="h-56 overflow-hidden">
                  <img
                    src={post.image}
                    alt={post.title}
                    className="w-full h-full object-cover transition-transform duration-500 hover:scale-105"
                  />
                </div>
                <div className="p-6">
                  <p className="text-gray-500 text-sm mb-2">{post.date}</p>
                  <h3 className="text-xl font-medium mb-3">{post.title}</h3>
                  <p className="text-gray-600 mb-4">{post.excerpt}</p>
                  <Link href={`/journal/${post.id}`} className="text-primary font-medium hover:underline">
                    Read More
                  </Link>
                </div>
              </article>
            ))}
          </div>
        </div>
      </section>
      
      <section className="py-12 px-4 bg-secondary">
        <div className="container mx-auto max-w-4xl text-center">
          <h2 className="section-title mb-6">Subscribe to Our Newsletter</h2>
          <p className="section-text mb-8">
            Stay updated with our latest journal entries, special offers, and events by subscribing to our monthly newsletter.
          </p>
          <form className="max-w-md mx-auto">
            <div className="flex flex-col sm:flex-row gap-4">
              <input
                type="email"
                placeholder="Your email address"
                className="flex-grow border border-gray-300 px-4 py-2 focus:outline-none focus:border-primary"
                required
              />
              <button type="submit" className="btn-primary whitespace-nowrap">
                Subscribe
              </button>
            </div>
          </form>
        </div>
      </section>
    </div>
  );
};

export default JournalPage;

// client/src/pages/CateringPage.tsx
import { useEffect } from "react";
import CateringSection from "@/components/catering/CateringSection";

const CateringPage = () => {
  useEffect(() => {
    document.title = "Atharva Raut's Cafe - Catering";
  }, []);

  return (
    <div className="pt-16">
      <div className="bg-secondary py-12">
        <div className="container mx-auto px-4">
          <h1 className="text-4xl md:text-5xl font-light text-center">Catering</h1>
        </div>
      </div>
      
      <section className="py-12 px-4">
        <div className="container mx-auto max-w-4xl text-center">
          <p className="section-text">
            From intimate gatherings to large corporate events, we can provide delicious food and exceptional coffee service tailored to your needs.
          </p>
        </div>
      </section>
      
      <CateringSection />
      
      <section className="py-20 px-4 bg-secondary">
        <div className="container mx-auto max-w-6xl">
          <h2 className="section-title text-center mb-12">Our Catering Packages</h2>
          
          <div className="grid grid-cols-1 md:grid-cols-3 gap-8">
            <div className="bg-white p-8">
              <h3 className="text-2xl font-medium mb-4">Breakfast</h3>
              <p className="mb-6">
                Start the day right with our breakfast selections including freshly baked pastries, granola pots, fruit platters, and our specialty coffee service.
              </p>
              <p className="text-primary font-medium">From £15 per person</p>
            </div>
            
            <div className="bg-white p-8">
              <h3 className="text-2xl font-medium mb-4">Lunch</h3>
              <p className="mb-6">
                A selection of our signature sandwiches, seasonal salads, and sweet treats, perfect for meetings and midday events.
              </p>
              <p className="text-primary font-medium">From £18 per person</p>
            </div>
            
            <div className="bg-white p-8">
              <h3 className="text-2xl font-medium mb-4">All Day</h3>
              <p className="mb-6">
                Comprehensive catering throughout the day, including breakfast, lunch, and afternoon refreshments with continuous coffee service.
              </p>
              <p className="text-primary font-medium">From £30 per person</p>
            </div>
          </div>
          
          <div className="text-center mt-12">
            <p className="mb-6 section-text">
              All packages can be customized to accommodate dietary requirements and preferences. Minimum order quantities apply.
            </p>
            <a href="/documents/catering-menu.pdf" className="btn-primary" target="_blank" rel="noopener noreferrer">
              Download Full Catering Menu
            </a>
          </div>
        </div>
      </section>
      
      <section className="py-20 px-4">
        <div className="container mx-auto max-w-6xl">
          <div className="grid grid-cols-1 md:grid-cols-2 gap-12 items-center">
            <div>
              <h2 className="section-title">How to Book</h2>
              <ol className="list-decimal pl-5 space-y-4 section-text">
                <li>Contact our catering team at catering@atharvarautscafe.com or call 020 7722 8782 to discuss your requirements.</li>
                <li>We'll work with you to create a menu that suits your event and budget.</li>
                <li>Once the details are confirmed, we'll send you a quotation.</li>
                <li>A 50% deposit is required to secure your booking, with the balance due 7 days before the event.</li>
                <li>For last-minute bookings (less than 48 hours notice), please call us directly to check availability.</li>
              </ol>
            </div>
            <div className="h-96 overflow-hidden">
              <img
                src="https://images.unsplash.com/photo-1414235077428-338989a2e8c0?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80"
                alt="Catering setup for a corporate event"
                className="w-full h-full object-cover"
              />
            </div>
          </div>
        </div>
      </section>
    </div>
  );
};

export default CateringPage;

// client/src/pages/ContactPage.tsx
import { useEffect } from "react";
import ContactSection from "@/components/contact/ContactSection";

const ContactPage = () => {
  useEffect(() => {
    document.title = "Atharva Raut's Cafe - Contact";
  }, []);

  return (
    <div className="pt-16">
      <div className="bg-secondary py-12">
        <div className="container mx-auto px-4">
          <h1 className="text-4xl md:text-5xl font-light text-center">Contact Us</h1>
        </div>
      </div>
      
      <section className="py-12 px-4">
        <div className="container mx-auto max-w-4xl text-center">
          <p className="section-text">
            We'd love to hear from you. Whether you have a question, feedback, or want to discuss a catering opportunity, our team is ready to help.
          </p>
        </div>
      </section>
      
      <ContactSection />
      
      <section className="py-20 px-4">
        <div className="container mx-auto max-w-6xl">
          <h2 className="section-title text-center mb-12">Visit Us</h2>
          
          <div className="grid grid-cols-1 md:grid-cols-2 gap-12">
            <div>
              <div className="h-80 overflow-hidden mb-6">
                <iframe 
                  src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d2480.669618430165!2d-0.16747172358894723!3d51.556687872725074!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x48761a8a41eb453f%3A0x9e847a016aa23c3!2s4%20South%20End%20Rd%2C%20London%20NW3%202QE%2C%20UK!5e0!3m2!1sen!2sus!4v1687888034402!5m2!1sen!2sus" 
                  width="100%" 
                  height="100%" 
                  style={{ border: 0 }} 
                  allowFullScreen 
                  loading="lazy" 
                  referrerPolicy="no-referrer-when-downgrade"
                  title="Belsize Park Location Map"
                ></iframe>
              </div>
              <h3 className="text-2xl font-medium mb-3">Belsize Park</h3>
              <p className="mb-2">4 South End Road, NW3 2QE</p>
              <p className="mb-2">Phone: 020 7722 8782</p>
              <p className="mb-4">Email: belsize@atharvarautscafe.com</p>
            </div>
            
            <div>
              <div className="h-80 overflow-hidden mb-6">
                <iframe 
                  src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d2480.367799983285!2d-0.17907372358864856!3d51.56242847178145!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x48761a9d1c0aa5bd%3A0x915eb220f9a1b7c1!2s64%20Hampstead%20High%20St%2C%20London%20NW3%201QH%2C%20UK!5e0!3m2!1sen!2sus!4v1687888142884!5m2!1sen!2sus" 
                  width="100%" 
                  height="100%" 
                  style={{ border: 0 }} 
                  allowFullScreen 
                  loading="lazy" 
                  referrerPolicy="no-referrer-when-downgrade"
                  title="Hampstead Location Map"
                ></iframe>
              </div>
              <h3 className="text-2xl font-medium mb-3">Hampstead</h3>
              <p className="mb-2">64 Hampstead High Street, NW3 1QH</p>
              <p className="mb-2">Phone: 020 7431 9098</p>
              <p className="mb-4">Email: hampstead@atharvarautscafe.com</p>
            </div>
          </div>
        </div>
      </section>
    </div>
  );
};

export default ContactPage;

// client/src/pages/not-found.tsx
import { Link } from "wouter";
import { useEffect } from "react";

export default function NotFound() {
  useEffect(() => {
    document.title = "Atharva Raut's Cafe - Page Not Found";
  }, []);

  return (
    <div className="flex flex-col items-center justify-center min-h-[70vh] px-4 text-center">
      <h1 className="text-4xl md:text-6xl font-light mb-6">Page Not Found</h1>
      <p className="text-lg md:text-xl max-w-2xl mb-8">
        We couldn't find the page you were looking for. It might have been moved or deleted, or perhaps there was a typo in the URL.
      </p>
      <Link href="/" className="btn-primary">
        Return to Homepage
      </Link>
    </div>
  );
}

// client/src/lib/constants.ts
import { MenuCategory, Location, JournalPost, InstagramPost } from './types';

export const MENU_DATA: MenuCategory[] = [
  {
    title: "Breakfast",
    items: [
      {
        title: "Free-Range Eggs on Sourdough",
        description: "Poached, scrambled or fried on artisan sourdough bread",
        price: "£8.50"
      },
      {
        title: "Avocado on Toast",
        description: "Fresh avocado with lemon, chili flakes, and olive oil on sourdough",
        price: "£9.50"
      },
      {
        title: "Breakfast Bowl",
        description: "Greek yogurt, house-made granola, seasonal fruits and honey",
        price: "£7.50"
      },
      {
        title: "French Toast",
        description: "Brioche with seasonal berries, maple syrup and crème fraîche",
        price: "£10.50"
      }
    ]
  },
  {
    title: "Lunch",
    items: [
      {
        title: "Seasonal Soup",
        description: "Daily changing soup served with sourdough bread",
        price: "£6.50"
      },
      {
        title: "Chicken & Avocado Sandwich",
        description: "Free-range chicken, avocado, lettuce, and aioli on ciabatta",
        price: "£9.50"
      },
      {
        title: "Mediterranean Salad",
        description: "Mixed leaves, cherry tomatoes, cucumber, feta, olives with herb dressing",
        price: "£9.00"
      },
      {
        title: "Roasted Vegetable & Halloumi Wrap",
        description: "Seasonal vegetables, grilled halloumi, hummus in a wholemeal wrap",
        price: "£8.50"
      }
    ]
  },
  {
    title: "Coffee & Drinks",
    items: [
      {
        title: "Espresso",
        description: "Single or double",
        price: "£2.50 / £3.00"
      },
      {
        title: "Flat White",
        description: "Double espresso with velvety steamed milk",
        price: "£3.50"
      },
      {
        title: "Latte",
        description: "Espresso with steamed milk",
        price: "£3.50"
      },
      {
        title: "Cold Brew",
        description: "Slow-steeped for 12 hours, smooth and refreshing",
        price: "£3.80"
      }
    ]
  }
];

export const LOCATIONS_DATA: Location[] = [
  {
    name: "Belsize Park",
    address: "4 South End Road, NW3 2QE",
    hours: {
      weekdays: "Monday - Friday: 7:30am - 5:00pm",
      weekends: "Saturday - Sunday: 8:00am - 5:00pm"
    },
    phone: "020 7722 8782",
    image: "https://images.unsplash.com/photo-1525610553991-2bede1a236e2?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80"
  },
  {
    name: "Hampstead",
    address: "64 Hampstead High Street, NW3 1QH",
    hours: {
      weekdays: "Monday - Friday: 7:30am - 5:00pm",
      weekends: "Saturday - Sunday: 8:00am - 5:00pm"
    },
    phone: "020 7431 9098",
    image: "https://images.unsplash.com/photo-1551887196-9b0a7e799053?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80"
  }
];

export const JOURNAL_POSTS: JournalPost[] = [
  {
    id: "1",
    title: "The Art of Coffee Cupping",
    excerpt: "Discover how our team selects the perfect beans through the traditional practice of coffee cupping.",
    date: "May 15, 2023",
    image: "https://images.unsplash.com/photo-1497636577773-f1231844b336?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80"
  },
  {
    id: "2",
    title: "Seasonal Menu Update",
    excerpt: "Our kitchen team has crafted new dishes showcasing the best spring produce from local farms.",
    date: "April 28, 2023",
    image: "https://images.unsplash.com/photo-1616360707441-a1b4c7c3ec44?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80"
  },
  {
    id: "3",
    title: "Brewing Methods Workshop",
    excerpt: "Join our head barista for a hands-on workshop exploring different coffee brewing techniques.",
    date: "April 10, 2023",
    image: "https://images.unsplash.com/photo-1559305616-3f99cd43e353?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80"
  }
];

export const INSTAGRAM_POSTS: InstagramPost[] = [
  {
    id: "1",
    image: "https://images.unsplash.com/photo-1485808191679-5f86510681a2?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60",
    alt: "Coffee cup on table"
  },
  {
    id: "2",
    image: "https://images.unsplash.com/photo-1541167760496-1628856ab772?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60",
    alt: "Avocado toast"
  },
  {
    id: "3",
    image: "https://images.unsplash.com/photo-1509042239860-f550ce710b93?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60",
    alt: "Coffee beans"
  },
  {
    id: "4",
    image: "https://images.unsplash.com/photo-1604881988758-f76ad2f7aac1?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60",
    alt: "Pastries display"
  },
  {
    id: "5",
    image: "https://images.unsplash.com/photo-1525193612562-0ec53b0e5d7c?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60",
    alt: "Cafe interior"
  },
  {
    id: "6",
    image: "https://images.unsplash.com/photo-1498804103079-a6351b050096?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60",
    alt: "Coffee pouring"
  }
];

export const GALLERY_IMAGES = [
  {
    id: "1",
    image: "https://images.unsplash.com/photo-1495474472287-4d71bcdd2085?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60",
    alt: "Coffee cup with latte art"
  },
  {
    id: "2",
    image: "https://images.unsplash.com/photo-1554118811-1e0d58224f24?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60",
    alt: "Freshly baked pastries"
  },
  {
    id: "3",
    image: "https://images.unsplash.com/photo-1513639776629-7b61b0ac49cb?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60",
    alt: "Bright cafe interior"
  },
  {
    id: "4",
    image: "https://images.unsplash.com/photo-1515215316771-2742baa337f4?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60",
    alt: "Avocado toast breakfast"
  }
];

// client/src/lib/types.ts
// Menu types
export interface MenuItem {
  title: string;
  description: string;
  price: string;
}

export interface MenuCategory {
  title: string;
  items: MenuItem[];
}

// Location types
export interface Location {
  name: string;
  address: string;
  hours: {
    weekdays: string;
    weekends: string;
  };
  phone: string;
  image: string;
}

// Journal types
export interface JournalPost {
  id: string;
  title: string;
  excerpt: string;
  date: string;
  image: string;
}

// Instagram Feed types
export interface InstagramPost {
  id: string;
  image: string;
  alt: string;
}

// client/src/lib/queryClient.ts
import { QueryClient } from "@tanstack/react-query";

async function throwIfResNotOk(res: Response) {
  if (!res.ok) {
    if (res.status === 401) {
      throw new Error("Unauthorized");
    }
    const data = await res.json().catch(() => null);
    if (data?.message) {
      throw new Error(data.message);
    }
    throw new Error(`Request failed with status ${res.status}`);
  }
}

export async function apiRequest(
  url: string,
  method: "GET" | "POST" | "PUT" | "DELETE" | "PATCH",
  body?: Record<string, any>,
) {
  const res = await fetch(url, {
    method,
    headers: {
      "Content-Type": "application/json",
    },
    body: body ? JSON.stringify(body) : undefined,
  });

  await throwIfResNotOk(res);

  const text = await res.text();
  if (!text) {
    return null;
  }

  return JSON.parse(text);
}

type UnauthorizedBehavior = "returnNull" | "throw";
export const getQueryFn: <T>(options: {
  on401: UnauthorizedBehavior;
}) => (params: { queryKey: [string, ...unknown[]] }) => Promise<T> =
  (options) =>
  async ({ queryKey }) => {
    const [url, ...rest] = queryKey;
    try {
      const res = await fetch(url as string);
      if (!res.ok) {
        if (res.status === 401 && options.on401 === "returnNull") {
          return null as unknown as T;
        }
        await throwIfResNotOk(res);
      }
      return await res.json();
    } catch (err) {
      console.error(`Error fetching ${url}`, rest, err);
      throw err;
    }
  };

export const queryClient = new QueryClient({
  defaultOptions: {
    queries: {
      queryFn: getQueryFn({ on401: "throw" }),
      retry: 0,
      refetchOnWindowFocus: false,
    },
  },
});

// server/index.ts
import express, { type Request, Response, NextFunction } from "express";
import { registerRoutes } from "./routes";
import { setupVite, serveStatic, log } from "./vite";

const app = express();
app.use(express.json());
app.use(express.urlencoded({ extended: false }));

// Add security headers to help with security scans
app.use((req, res, next) => {
  res.setHeader('X-Content-Type-Options', 'nosniff');
  res.setHeader('X-Frame-Options', 'DENY');
  res.setHeader('X-XSS-Protection', '1; mode=block');
  res.setHeader('Strict-Transport-Security', 'max-age=31536000; includeSubDomains');
  res.setHeader('Content-Security-Policy', "default-src 'self'; img-src 'self' https://images.unsplash.com data:; style-src 'self' 'unsafe-inline'; script-src 'self' 'unsafe-inline' 'unsafe-eval'; font-src 'self'; frame-src https://www.google.com;");
  next();
});

app.use((req, res, next) => {
  const start = Date.now();
  const path = req.path;
  let capturedJsonResponse: Record<string, any> | undefined = undefined;

  const originalResJson = res.json;
  res.json = function (bodyJson, ...args) {
    capturedJsonResponse = bodyJson;
    return originalResJson.apply(res, [bodyJson, ...args]);
  };

  res.on("finish", () => {
    const duration = Date.now() - start;
    if (path.startsWith("/api")) {
      let logLine = `${req.method} ${path} ${res.statusCode} in ${duration}ms`;
      if (capturedJsonResponse) {
        logLine += ` :: ${JSON.stringify(capturedJsonResponse)}`;
      }

      if (logLine.length > 80) {
        logLine = logLine.slice(0, 79) + "…";
      }

      log(logLine);
    }
  });

  next();
});

(async () => {
  const server = await registerRoutes(app);

  app.use((err: any, _req: Request, res: Response, _next: NextFunction) => {
    const status = err.status || err.statusCode || 500;
    const message = err.message || "Internal Server Error";

    res.status(status).json({ message });
    throw err;
  });

  // importantly only setup vite in development and after
  // setting up all the other routes so the catch-all route
  // doesn't interfere with the other routes
  if (app.get("env") === "development") {
    await setupVite(app, server);
  } else {
    serveStatic(app);
  }

  // ALWAYS serve the app on port 5000
  // this serves both the API and the client.
  // It is the only port that is not firewalled.
  const port = 5000;
  server.listen({
    port,
    host: "0.0.0.0",
    reusePort: true,
  }, () => {
    log(`serving on port ${port}`);
  });
})();

// server/routes.ts
import type { Express } from "express";
import { createServer, type Server } from "http";
import { storage } from "./storage";
import { z } from "zod";
import { insertContactMessageSchema } from "@shared/schema";

export async function registerRoutes(app: Express): Promise<Server> {
  // Contact form API
  app.post("/api/contact", async (req, res) => {
    try {
      const validatedData = insertContactMessageSchema.parse(req.body);
      
      // Save to database
      const savedMessage = await storage.saveContactMessage(validatedData);
      
      console.log("Contact form submission saved:", savedMessage.id);
      
      res.status(200).json({ message: "Message received", id: savedMessage.id });
    } catch (error) {
      if (error instanceof z.ZodError) {
        res.status(400).json({ message: "Validation error", errors: error.errors });
      } else {
        console.error("Error saving contact form:", error);
        res.status(500).json({ message: "Server error" });
      }
    }
  });

  // Get all contact messages
  app.get("/api/contact", async (req, res) => {
    try {
      const messages = await storage.getAllContactMessages();
      res.status(200).json(messages);
    } catch (error) {
      console.error("Error fetching contact messages:", error);
      res.status(500).json({ message: "Server error" });
    }
  });

  const httpServer = createServer(app);

  return httpServer;
}

// server/db.ts
import { Pool, neonConfig } from '@neondatabase/serverless';
import { drizzle } from 'drizzle-orm/neon-serverless';
import ws from "ws";
import * as schema from "@shared/schema";

neonConfig.webSocketConstructor = ws;

if (!process.env.DATABASE_URL) {
  throw new Error(
    "DATABASE_URL must be set. Did you forget to provision a database?",
  );
}

export const pool = new Pool({ connectionString: process.env.DATABASE_URL });
export const db = drizzle(pool, { schema });

// server/storage.ts
import { users, contactMessages, type User, type InsertUser, type ContactMessage, type InsertContactMessage } from "@shared/schema";
import { db } from "./db";
import { eq } from "drizzle-orm";

// modify the interface with any CRUD methods
// you might need

export interface IStorage {
  getUser(id: number): Promise<User | undefined>;
  getUserByUsername(username: string): Promise<User | undefined>;
  createUser(user: InsertUser): Promise<User>;
  saveContactMessage(message: InsertContactMessage): Promise<ContactMessage>;
  getAllContactMessages(): Promise<ContactMessage[]>;
}

export class DatabaseStorage implements IStorage {
  async getUser(id: number): Promise<User | undefined> {
    const [user] = await db.select().from(users).where(eq(users.id, id));
    return user || undefined;
  }

  async getUserByUsername(username: string): Promise<User | undefined> {
    const [user] = await db.select().from(users).where(eq(users.username, username));
    return user || undefined;
  }

  async createUser(insertUser: InsertUser): Promise<User> {
    const [user] = await db
      .insert(users)
      .values(insertUser)
      .returning();
    return user;
  }

  async saveContactMessage(message: InsertContactMessage): Promise<ContactMessage> {
    const [savedMessage] = await db
      .insert(contactMessages)
      .values(message)
      .returning();
    return savedMessage;
  }

  async getAllContactMessages(): Promise<ContactMessage[]> {
    return db.select().from(contactMessages).orderBy(contactMessages.createdAt);
  }
}

export const storage = new DatabaseStorage();

// shared/schema.ts
import { pgTable, text, serial, integer, boolean, timestamp } from "drizzle-orm/pg-core";
import { createInsertSchema } from "drizzle-zod";
import { z } from "zod";

// User schema
export const users = pgTable("users", {
  id: serial("id").primaryKey(),
  username: text("username").notNull().unique(),
  password: text("password").notNull(),
});

export const insertUserSchema = createInsertSchema(users).pick({
  username: true,
  password: true,
});

export type InsertUser = z.infer<typeof insertUserSchema>;
export type User = typeof users.$inferSelect;

// Contact form submissions
export const contactMessages = pgTable("contact_messages", {
  id: serial("id").primaryKey(),
  name: text("name").notNull(),
  email: text("email").notNull(),
  subject: text("subject").notNull(),
  message: text("message").notNull(),
  createdAt: timestamp("created_at").defaultNow().notNull(),
});

export const insertContactMessageSchema = createInsertSchema(contactMessages).pick({
  name: true,
  email: true,
  subject: true,
  message: true,
});

export type InsertContactMessage = z.infer<typeof insertContactMessageSchema>;
export type ContactMessage = typeof contactMessages.$inferSelect;

// package.json
{
  "name": "rest-express",
  "version": "1.0.0",
  "license": "MIT",
  "scripts": {
    "dev": "NODE_ENV=development tsx server/index.ts",
    "build": "vite build",
    "start": "NODE_ENV=production node dist/server/index.js",
    "db:push": "drizzle-kit push"
  }
}

// drizzle.config.ts
import type { Config } from "drizzle-kit";

export default {
  schema: "./shared/schema.ts",
  out: "./drizzle",
  driver: "pg",
  dbCredentials: {
    connectionString: process.env.DATABASE_URL || "",
  },
  verbose: true,
  strict: true,
} satisfies Config;

// theme.json
{
  "appearance": "light",
  "primary": "#A85443",
  "radius": 0.3,
  "variant": "professional"
}

// tailwind.config.ts
/** @type {import('tailwindcss').Config} */
module.exports = {
  darkMode: ["class"],
  content: ["./client/index.html", "./client/src/**/*.{js,ts,jsx,tsx}"],
  theme: {
    container: {
      center: true,
      padding: "2rem",
      screens: {
        "2xl": "1400px",
      },
    },
    extend: {
      colors: {
        border: "hsl(var(--border))",
        input: "hsl(var(--input))",
        ring: "hsl(var(--ring))",
        background: "hsl(var(--background))",
        foreground: "hsl(var(--foreground))",
        primary: {
          DEFAULT: "hsl(var(--primary))",
          foreground: "hsl(var(--primary-foreground))",
        },
        secondary: {
          DEFAULT: "hsl(var(--secondary))",
          foreground: "hsl(var(--secondary-foreground))",
        },
        destructive: {
          DEFAULT: "hsl(var(--destructive))",
          foreground: "hsl(var(--destructive-foreground))",
        },
        muted: {
          DEFAULT: "hsl(var(--muted))",
          foreground: "hsl(var(--muted-foreground))",
        },
        accent: {
          DEFAULT: "hsl(var(--accent))",
          foreground: "hsl(var(--accent-foreground))",
        },
        popover: {
          DEFAULT: "hsl(var(--popover))",
          foreground: "hsl(var(--popover-foreground))",
        },
        card: {
          DEFAULT: "hsl(var(--card))",
          foreground: "hsl(var(--card-foreground))",
        },
      },
      borderRadius: {
        lg: "var(--radius)",
        md: "calc(var(--radius) - 2px)",
        sm: "calc(var(--radius) - 4px)",
      },
      keyframes: {
        "accordion-down": {
          from: { height: 0 },
          to: { height: "var(--radix-accordion-content-height)" },
        },
        "accordion-up": {
          from: { height: "var(--radix-accordion-content-height)" },
          to: { height: 0 },
        },
      },
      animation: {
        "accordion-down": "accordion-down 0.2s ease-out",
        "accordion-up": "accordion-up 0.2s ease-out",
      },
    },
  },
  plugins: [require("tailwindcss-animate"), require("@tailwindcss/typography")],
};
